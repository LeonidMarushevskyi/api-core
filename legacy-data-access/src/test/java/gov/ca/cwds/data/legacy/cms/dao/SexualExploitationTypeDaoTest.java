package gov.ca.cwds.data.legacy.cms.dao;

import gov.ca.cwds.data.legacy.cms.entity.syscodes.SexualExploitationType;
import gov.ca.cwds.data.legacy.cms.persistence.BaseCwsCmsInMemoryPersistenceTest;
import org.junit.Before;
import org.junit.Test;

import static org.junit.Assert.*;

/**
 * CWDS API Team
 */
public class SexualExploitationTypeDaoTest extends BaseCwsCmsInMemoryPersistenceTest {
  private static final short CSEC_AT_RISK_ID = 6867;
  private static final short CSEC_NOT_EXISTING_ID = -1;
  private SexualExploitationTypeDao sexualExploitationTypeDao;

  @Before
  public void before() {
    sexualExploitationTypeDao = new SexualExploitationTypeDao(sessionFactory);
  }

  @Test
  public void testFindExisting() throws Exception {
    executeInTransaction(sessionFactory, sessionFactory1 -> {
      SexualExploitationType specialEducations = sexualExploitationTypeDao.find(CSEC_AT_RISK_ID);
      assertEquals("CSEC_TPC", specialEducations.getFkMeta());
    });
  }

  @Test
  public void testFindAbsent() throws Exception {
    executeInTransaction(sessionFactory, sessionFactory1 -> {
      assertNull(sexualExploitationTypeDao.find(CSEC_NOT_EXISTING_ID));
    });
  }
}